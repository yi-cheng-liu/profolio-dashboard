import g from"react";import{matchResourceFromRoute as L,ResourceContext as k}from"@refinedev/core";import{useCallback as h,useContext as A}from"react";import y from"qs";import{useNavigate as P,useLocation as C,Link as E,matchPath as I,useParams as S}from"react-router-dom";var d=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var v={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},F={go:()=>{let{search:e,hash:t}=C(),r=P();return h(({to:s,type:n,query:o,hash:a,options:{keepQuery:c,keepHash:f}={}})=>{let u={...c&&e&&y.parse(e,{ignoreQueryPrefix:!0}),...o};u.to&&(u.to=encodeURIComponent(`${u.to}`));let p=Object.keys(u).length>0,m=`#${(a||f&&t||"").replace(/^#/,"")}`,U=m.length>1,R=`${s||""}${p?y.stringify(u,v):""}${U?m:""}`;return n==="path"?R:r(R,{replace:n==="replace"})},[t,e,r])},back:()=>{let e=P();return h(()=>{e(-1)},[e])},parse:()=>{var c;let e=S(),{pathname:t,search:r}=C(),{resources:i}=A(k),{resource:s,action:n,matchedRoute:o}=g.useMemo(()=>L(t,i),[i,t]);return Object.entries(e).length===0&&o&&(e=((c=I(o,t))==null?void 0:c.params)||{}),h(()=>{let f=y.parse(r,{ignoreQueryPrefix:!0}),u={...e,...f};return{...s&&{resource:s},...n&&{action:n},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...u,current:d(u.current),pageSize:d(u.pageSize),to:u.to?decodeURIComponent(u.to):void 0}}},[t,r,e,s,n])},Link:g.forwardRef(function(t,r){return g.createElement(E,{...t,ref:r})})};import b from"react";import{useResource as B}from"@refinedev/core";import x from"react";import{Route as D}from"react-router-dom";var j=(e,t)=>{let{name:r,list:i,create:s,show:n,edit:o}=e;if(typeof i=="string"&&t==="list")return i;if(typeof i=="object"&&t==="list")return i.path;if(typeof s=="string"&&t==="create")return s;if(typeof s=="object"&&t==="create")return s.path;if(typeof n=="string"&&t==="show")return n;if(typeof n=="object"&&t==="show")return n.path;if(typeof o=="string"&&t==="edit")return o;if(typeof o=="object"&&t==="edit")return o.path;let a=`/${r}`,c=`${["edit","create","clone","show"].includes(t)?t:""}`,f=`${["edit","show","clone"].includes(t)?":id":""}`;return[a,c,f].filter(Boolean).join("/")},N=e=>e.flatMap(r=>{let i=[];return["list","show","edit","create"].forEach(s=>{let n=r[s];if(typeof n<"u"&&typeof n!="string"){let o=typeof n=="function"?n:n.component,a=j(r,s);i.push({action:s,element:o,path:a}),s==="create"&&i.push({action:"clone",element:o,path:a})}}),i.map(({action:s,element:n,path:o})=>{let a=x.createElement(n,null);return x.createElement(D,{key:`${s}-${o}`,path:o,element:a})})});import{Routes as H}from"react-router-dom";var M=({children:e})=>{let{resources:t}=B(),r=b.useMemo(()=>N(t),[t]);return e?e(r):b.createElement(H,null,r)};import{useResource as G,useGetToPath as Q}from"@refinedev/core";import V from"react";import{Navigate as q}from"react-router-dom";var K=({resource:e,meta:t})=>{let r=Q(),{resource:i,resources:s}=G(e),n=i||s.find(o=>o.list);if(n){let o=r({resource:n,action:"list",meta:t});return o?V.createElement(q,{to:o}):(console.warn("No resource is found to navigate to."),null)}return console.warn("No resource is found to navigate to."),null};import w from"react";import{useTranslate as J,useWarnAboutChange as X}from"@refinedev/core";import l from"react";import{UNSAFE_NavigationContext as O}from"react-router-dom";function z(e,t=!0){let{navigator:r}=l.useContext(O);l.useEffect(()=>{if(!t)return;let i=r.go,s=r.push;return r.push=(...n)=>{e()!==!1&&s(...n)},r.go=(...n)=>{e()!==!1&&i(...n)},()=>{r.push=s,r.go=i}},[r,e,t])}function T(e,t=!0,r,i=!1){let s=l.useCallback(o=>(o.preventDefault(),o.returnValue=e,o.returnValue),[e]);l.useEffect(()=>(t&&!i&&window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}),[s,t,i]);let n=l.useCallback(()=>{let o=window.confirm(e);return o&&r&&r(),o},[e]);z(n,t)}import{useLocation as W}from"react-router-dom";var Y=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let r=J(),{pathname:i}=W(),{warnWhen:s,setWarnWhen:n}=X();w.useEffect(()=>()=>n==null?void 0:n(!1),[i]);let o=w.useMemo(()=>r(e,t),[e,t,r]);return T(o,s,()=>{n==null||n(!1)}),null};import _ from"react";import{Navigate as Z,useLocation as ee}from"react-router-dom";var te=({to:e})=>{let{pathname:t,search:r}=ee(),i=`${t}${r}`,s=i.length>1?`?to=${encodeURIComponent(i)}`:"";return _.createElement(Z,{to:`${e}${s}`})};import{useParsed as oe,useTranslate as re,generateDefaultDocumentTitle as ne,useUserFriendlyName as se}from"@refinedev/core";import $,{useLayoutEffect as ie}from"react";import{useLocation as ue}from"react-router-dom";function ae({handler:e}){var p;let t=ue(),{action:r,id:i,params:s,pathname:n,resource:o}=oe(),a=re(),c=se(),f=(o==null?void 0:o.identifier)??(o==null?void 0:o.name),u=(o==null?void 0:o.label)??((p=o==null?void 0:o.meta)==null?void 0:p.label)??c(f,r==="list"?"plural":"singular");return ie(()=>{let m=ne(a,o,r,`${i}`,u);e?document.title=e({action:r,resource:o,params:s,pathname:n,autoGeneratedTitle:m}):document.title=m},[t]),$.createElement($.Fragment,null)}import{useTranslate as ce}from"@refinedev/core";import{useEffect as fe}from"react";var pe=e=>{let t=ce();return fe(()=>{e&&(typeof e=="string"?document.title=t(e):document.title=t(e.i18nKey))},[e]),r=>{typeof r=="string"?document.title=t(r):document.title=t(r.i18nKey)}};export{te as CatchAllNavigate,ae as DocumentTitleHandler,K as NavigateToResource,M as RefineRoutes,Y as UnsavedChangesNotifier,F as default,v as stringifyConfig,pe as useDocumentTitle};
//# sourceMappingURL=index.mjs.map