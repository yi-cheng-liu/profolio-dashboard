"use client"
var A=Object.create;var u=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var O=(r,e)=>{for(var t in e)u(r,t,{get:e[t],enumerable:!0})},E=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of x(e))!L.call(r,n)&&n!==t&&u(r,n,{get:()=>e[n],enumerable:!(o=b(e,n))||o.enumerable});return r};var v=(r,e,t)=>(t=r!=null?A(C(r)):{},E(e||!r||!r.__esModule?u(t,"default",{value:r,enumerable:!0}):t,r)),h=r=>E(u({},"__esModule",{value:!0}),r);var M={};O(M,{getTrace:()=>y,getXRay:()=>k,useQuerySubscription:()=>N});module.exports=h(M);var T=v(require("error-stack-parser"));var Q="renderWithHooks",_=r=>{let e=r.findIndex(t=>t.functionName===Q);return e!==-1?r.slice(0,e):r};var l=process.env.NODE_ENV!=="development"?/node_modules\/refinedev\/(?<name>.*?)\//:/\/refine\/packages\/(?<name>.*?)\//;var g=r=>r?!!r.match(l):!1;var R=r=>{var o;if(!r)return;let e=r.match(l),t=(o=e==null?void 0:e.groups)==null?void 0:o.name;if(t)return`@refinedev/${t}`};function y(r){if(process.env.NODE_ENV!=="development")return[];try{let e=new Error,t=T.default.parse(e);return _(t).map(s=>({file:s.fileName,line:s.lineNumber,column:s.columnNumber,function:s.functionName,isRefine:g(s.fileName),packageName:R(s.fileName)})).filter(s=>s.function).filter(s=>!(r!=null&&r.includes(s.function??""))).slice(1)}catch{return[]}}var d=require("@refinedev/devtools-shared"),I=(r,e)=>{if(d.scopes[r]==="auth")return null;if(r==="useCan")return e?"key[1].resource":"key[1]";if(d.scopes[r]==="audit-log")return r==="useLog"?"variables.resource":"key[1]";if(d.scopes[r]==="data"){if(r==="useCustom"||r==="useCustomMutation")return null;switch(r){case"useList":case"useInfiniteList":case"useOne":case"useMany":return e?"key[1]":"key[2]";case"useCreate":case"useCreateMany":case"useDelete":case"useDeleteMany":case"useUpdate":case"useUpdateMany":return"variables.resource"}}return null};function k(r,e,t,o){if(process.env.NODE_ENV!=="development")return{hookName:"",trace:[],resourcePath:null,legacyKey:!1};let n=y(o).slice(1),s=I(r,e);return{hookName:r,trace:n,resourcePath:s,legacyKey:e,resourceName:t}}var f=require("@refinedev/devtools-shared"),c=v(require("react"));var i=require("@refinedev/devtools-shared");var m=(r,e)=>{let t=e==null?void 0:e.map(n=>`${n.file}:${n.line}:${n.column}#${n.function}-${n.packageName}-${n.isRefine?1:0}`);return JSON.stringify([...r??[],...t??[]])};var P=r=>e=>{var o;if(!((o=e==null?void 0:e.meta)!=null&&o.trace))return;let t=e==null?void 0:e.meta;new Promise(n=>{var s,a;(0,i.send)(r,i.DevtoolsEvent.ACTIVITY,{type:"mutation",identifier:m(e==null?void 0:e.options.mutationKey,(s=e==null?void 0:e.meta)==null?void 0:s.trace),key:e==null?void 0:e.options.mutationKey,status:e==null?void 0:e.state.status,state:e==null?void 0:e.state,variables:(a=e==null?void 0:e.state)==null?void 0:a.variables,...t}),n()})},D=r=>e=>{var o;if(!((o=e==null?void 0:e.meta)!=null&&o.trace))return;let t=e==null?void 0:e.meta;new Promise(n=>{var s;(0,i.send)(r,i.DevtoolsEvent.ACTIVITY,{type:"query",identifier:m(e.queryKey,(s=e.meta)==null?void 0:s.trace),key:e.queryKey,status:e.state.status,state:e.state,...t}),n()})};var N=process.env.NODE_ENV!=="development"?()=>({}):r=>{let{ws:e}=(0,c.useContext)(f.DevToolsContext),t=c.default.useRef(),o=c.default.useRef();return c.default.useEffect(()=>{if(!e)return()=>0;let n=r.getQueryCache(),s=D(e);return n.getAll().forEach(s),t.current=n.subscribe(({query:a,type:p})=>(p==="added"||p==="updated")&&s(a)),()=>{var a;(a=t.current)==null||a.call(t)}},[e,r]),c.default.useEffect(()=>{if(!e)return()=>0;let n=r.getMutationCache(),s=P(e);return n.getAll().forEach(s),o.current=n.subscribe(({mutation:a,type:p})=>(p==="added"||p==="updated")&&s(a)),()=>{var a;(a=o.current)==null||a.call(o)}},[e,r]),c.default.useEffect(()=>e?(0,f.receive)(e,f.DevtoolsEvent.DEVTOOLS_INVALIDATE_QUERY_ACTION,({queryKey:s})=>{s&&r.invalidateQueries(s)}):()=>0,[e,r]),{}};
//# sourceMappingURL=index.cjs.map